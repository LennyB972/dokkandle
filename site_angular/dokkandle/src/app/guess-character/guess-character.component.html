<div class="game-container">
  <div class="header">
    <h1>DEVINE LE PERSONNAGE DE DOKKAN BATTLE D'AUJOURD'HUI!</h1>
    <div class="attempts-counter">
      Essai {{ attempts }}/∞
    </div>
  </div>
  
  <!-- Écran de chargement -->
  <div class="loading-screen" *ngIf="isLoading">
    <div class="loader"></div>
    <p>Chargement du jeu...</p>
  </div>
  
  <!-- Message d'erreur -->
  <div class="error-message" *ngIf="errorMessage">
    <p>{{ errorMessage }}</p>
    <button (click)="startNewGame()" class="retry-button">Réessayer</button>
  </div>
  
  <!-- Zone principale du jeu -->
  <div class="game-content" *ngIf="!isLoading && !errorMessage">
    <!-- Résultats des tentatives précédentes -->
    <div class="results-container">
      <div *ngIf="guesses.length === 0" class="no-guesses">
        <p>Entrez le nom d'un personnage pour commencer à jouer!</p>
      </div>
      
      <div class="guess-row" *ngFor="let guess of guesses">
        <div class="character-name" [ngClass]="{'correct': guess.isCorrect}">
          {{ guess.character.name }}
        </div>
        
        <div class="hints-grid">
          <!-- Type (Super/Extreme) -->
          <div class="hint-box" [ngClass]="{'correct-hint': guess.hints.type, 'incorrect-hint': !guess.hints.type}">
            {{ guess.character.type || '?' }}
          </div>
          
          <!-- Couleur (AGL/TEQ/INT/STR/PHY) -->
          <div class="hint-box" [ngClass]="{'correct-hint': guess.hints.color, 'incorrect-hint': !guess.hints.color}">
            {{ guess.character.color || '?' }}
          </div>
          
          <!-- Catégories -->
          <div class="hint-box" [ngClass]="{'correct-hint': guess.hints.category, 'incorrect-hint': !guess.hints.category}">
            <span>Catégories</span>
          </div>
          
          <!-- Rareté -->
          <div class="hint-box" [ngClass]="{'correct-hint': guess.hints.rarity, 'incorrect-hint': !guess.hints.rarity}">
            {{ getCharacterRarity(guess.character) }}
          </div>
          
          <!-- Année de sortie -->
          <div class="hint-box" [ngClass]="{'correct-hint': guess.hints.releaseYear, 'incorrect-hint': !guess.hints.releaseYear}">
            {{ getCharacterReleaseYear(guess.character) }}
          </div>
        </div>
      </div>
    </div>
    
    <!-- Zone de saisie -->
    <div class="input-area" [ngClass]="{'disabled': isGameOver}">
      <div class="input-container">
        <input 
          #characterInput
          type="text" 
          [(ngModel)]="characterGuess" 
          placeholder="Entrez le nom d'un personnage" 
          (keyup.enter)="submitGuess()"
          (input)="onInput()"
          [disabled]="isGameOver"
        >
        
        <!-- Suggestions d'auto-complétion -->
        <div class="suggestions" *ngIf="showSuggestions">
          <div 
            *ngFor="let character of suggestions" 
            class="suggestion-item"
            (click)="selectSuggestion(character)"
          >
            {{ character.name }}
          </div>
        </div>
      </div>
      
      <div class="buttons-container">
        <button 
          class="guess-btn" 
          (click)="submitGuess()" 
          [disabled]="isGameOver || !characterGuess">
          Deviner
        </button>
        
        <button 
          class="abandon-btn" 
          (click)="giveUp()" 
          [disabled]="isGameOver">
          Abandonner
        </button>
      </div>
    </div>
    
    <!-- Message de fin de jeu -->
    <div class="game-over-message" *ngIf="isGameOver">
      <div *ngIf="guesses[guesses.length-1]?.isCorrect" class="success-message">
        <h2>Bravo ! Vous avez trouvé le personnage en {{ attempts }} essai(s).</h2>
      </div>
      
      <div *ngIf="!guesses[guesses.length-1]?.isCorrect" class="failure-message">
        <h2>Dommage ! Le personnage était: {{ targetCharacter.name }}</h2>
      </div>
      
      <button class="new-game-btn" (click)="resetGame()">Nouvelle partie</button>
    </div>
  </div>
  
  <a routerLink="/" class="back-link">Retour à l'accueil</a>
</div>